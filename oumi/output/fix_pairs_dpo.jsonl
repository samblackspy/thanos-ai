{"prompt": "You are a code fixing assistant. Fix this issue:\n\nFix the authentication bug where users get logged out after 5 minutes\n\nProvide a git diff patch:", "chosen": "diff --git a/src/auth/session.py b/src/auth/session.py\n--- a/src/auth/session.py\n+++ b/src/auth/session.py\n@@ -15,7 +15,7 @@ class SessionManager:\n-    SESSION_TIMEOUT = 300  # 5 minutes\n+    SESSION_TIMEOUT = 3600  # 1 hour\n     \n     def refresh_session(self, user_id: str):\n         self.sessions[user_id].last_active = datetime.now()\n", "rejected": "diff --git a/src/auth/session.py b/src/auth/session.py\n--- a/src/auth/session.py\n+++ b/src/auth/session.py\n@@ -15,7 +15,7 @@ class SessionManager:\n-    SESSION_TIMEOUT = 300\n+    # TODO: fix timeout\n     pass\n"}
{"prompt": "You are a code fixing assistant. Fix this issue:\n\nAdd rate limiting to the API endpoints to prevent abuse\n\nProvide a git diff patch:", "chosen": "diff --git a/src/api/middleware.py b/src/api/middleware.py\n--- a/src/api/middleware.py\n+++ b/src/api/middleware.py\n@@ -1,5 +1,6 @@\n from fastapi import Request, HTTPException\n+from fastapi.middleware.throttling import ThrottlingMiddleware\n \n+RATE_LIMIT = 100  # requests per minute\n+\n class RateLimiter:\n+    def __init__(self):\n+        self.requests = {}\n+    \n+    async def check_rate_limit(self, request: Request):\n+        client_ip = request.client.host\n+        # Implementation of token bucket algorithm\n+        if self._is_rate_limited(client_ip):\n+            raise HTTPException(status_code=429, detail=\"Too many requests\")\n", "rejected": "diff --git a/src/api/middleware.py b/src/api/middleware.py\n--- a/src/api/middleware.py\n+++ b/src/api/middleware.py\n@@ -1,5 +1,6 @@\n+import time\n+time.sleep(1)  # slow down requests\n"}
{"prompt": "You are a code fixing assistant. Fix this issue:\n\nFix the SQL injection vulnerability in the search endpoint\n\nProvide a git diff patch:", "chosen": "diff --git a/src/db/queries.py b/src/db/queries.py\n--- a/src/db/queries.py\n+++ b/src/db/queries.py\n@@ -10,8 +10,8 @@ class SearchQuery:\n     def search(self, term: str):\n-        query = f\"SELECT * FROM items WHERE name LIKE '%{term}%'\"\n-        return self.db.execute(query)\n+        query = \"SELECT * FROM items WHERE name LIKE ?\"\n+        return self.db.execute(query, (f\"%{term}%\",))\n", "rejected": "diff --git a/src/db/queries.py b/src/db/queries.py\n--- a/src/db/queries.py\n+++ b/src/db/queries.py\n@@ -10,8 +10,8 @@ class SearchQuery:\n     def search(self, term: str):\n-        query = f\"SELECT * FROM items WHERE name LIKE '%{term}%'\"\n+        query = f\"SELECT * FROM items WHERE name LIKE '%{term.replace(\"'\", \"\")}%'\"\n"}
